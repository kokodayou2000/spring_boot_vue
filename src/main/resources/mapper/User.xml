<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
        "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.example.demo.mapper.UserMapper">
    <update id="update">
        update sys_user
        <set>
            <if test="username != null">
                username=#{username},
            </if>
            <if test="nickname != null">
                nickname=#{nickname},
            </if>
            <if test="email != null">
                email=#{email},
            </if>
            <if test="phone != null">
                phone=#{phone},
            </if>
            <if test="address != null">
                address=#{address},
            </if>
        </set>
        <where>
            id=#{id}
        </where>
    </update>

    <select id="findAll" parameterType="java.lang.Integer" resultType="com.example.demo.entity.User">
        select *from sys_user;
    </select>
    <select id="findPage" resultType="com.example.demo.entity.User">
        select *from sys_user limit #{param1},#{param2};
    </select>
    <select id="selectTotal" resultType="java.lang.Integer">
        select count(*) from sys_user;
    </select>
    <select id="findPageByUsername" resultType="com.example.demo.entity.User">
        select * from sys_user where username like concat('%',#{username},'%') limit  #{param1},#{param2};
    </select>
    <select id="selectTotalByName" resultType="java.lang.Integer">
        select count(*) from sys_user where username like concat('%',#{username},'%')
    </select>
    <select id="selectTotalByEmail" resultType="java.lang.Integer">
        select count(*) from sys_user where email like concat('%',#{email},'%')
    </select>
    <select id="findPageByEmail" resultType="com.example.demo.entity.User">
        select * from sys_user where email like concat('%',#{email},'%') limit  #{param1},#{param2};
    </select>
    <select id="selectTotalByUsernameAndEmail" resultType="java.lang.Integer">
        select count(*) from sys_user where email like concat('%',#{email},'%') and username like concat('%',#{username},'%')
    </select>
    <select id="findPageByUsernameAndEmail" resultType="com.example.demo.entity.User">
        select * from sys_user where username like concat('%',#{username},'%') and email like concat('%',#{email},'%') limit  #{param1},#{param2};
    </select>

    <insert id="save" parameterType="com.example.demo.entity.User" >
        insert into sys_user(username, password, nickname) values (#{username},#{password},#{nickname})
    </insert>


    <delete id="deleteById" parameterType="java.lang.Integer">
            delete from sys_user where id = #{id}
    </delete>

</mapper>
